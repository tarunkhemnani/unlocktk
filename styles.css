/* ---------- full styles.css (replace your existing file) ---------- */
:root{
  --circle-size:80px;
  --gap-x:28px;
  --gap-y:18px;
  --safe-bottom:env(safe-area-inset-bottom);
  --app-viewport-height:100dvh;
  --island-w:170px;
  --island-h:42px;
  --island-radius:28px;
  --island-top-offset:-49px;
  --island-icon-size:22px;
}

/* base */
html,body{touch-action:manipulation;margin:0;padding:0;height:100%;min-height:100%;-webkit-font-smoothing:antialiased;-webkit-text-size-adjust:100%;font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Helvetica Neue",Arial,sans-serif;background-color:#000;background:linear-gradient(135deg,#0f1724,#071023);overscroll-behavior:none;overflow:hidden;-webkit-overflow-scrolling:auto}

/* wallpaper */
.wallpaper-layer{position:fixed;inset:0;z-index:0;pointer-events:none;background:linear-gradient(135deg,#0f1724,#071023);display:block;overflow:hidden}
.wallpaper-img{position:absolute;left:0;top:0;width:100%;height:100%;object-fit:cover;display:block;pointer-events:none;-webkit-user-select:none;user-select:none;transform:translateZ(0)}

/* lockscreen */
.lockscreen{position:fixed;left:0;right:0;top:0;z-index:2;width:100%;height:var(--app-viewport-height,100dvh);min-height:var(--app-viewport-height,100dvh);display:flex;justify-content:center;align-items:flex-start;box-sizing:border-box;overflow:hidden;padding-top:calc(env(safe-area-inset-top) + 84px);padding-bottom:calc(var(--safe-bottom) + 8px);background:transparent}
.lockscreen::after{content:"";position:fixed;left:0;right:0;bottom:0;height:calc(env(safe-area-inset-bottom,0px)+4px);pointer-events:none;z-index:9998;background:transparent}
.lockscreen-inner{width:100%;display:flex;flex-direction:column;align-items:center;z-index:3;transform:translate3d(0,0,0) scale(1);backface-visibility:hidden}

/* prompt/dots */
.prompt{position:relative;z-index:3;text-align:center;font-size:20px;font-weight:600;line-height:1.15;text-shadow:0 3px 12px rgba(0,0,0,0.6);margin-bottom:18px;color:#fff}
.dots{display:flex;gap:14px;margin-bottom:28px;pointer-events:none;z-index:3;will-change:transform}
.dot{width:10px;height:10px;border-radius:50%;border:1.25px solid #fff;background:transparent;transition:background .12s ease,transform .12s ease,border-color .12s ease;box-shadow:0 2px 6px rgba(0,0,0,0.45) inset}
.dot.filled{background:#fff;border-color:#fff;transform:scale(1.06);box-shadow:none}

/* keypad */
.keypad{width:100%;max-width:420px;display:grid;grid-template-columns:repeat(3,var(--circle-size));gap:var(--gap-y) var(--gap-x);justify-content:center;align-items:center;margin-top:50px;z-index:3}
.key{width:var(--circle-size);height:var(--circle-size);border-radius:999px;display:inline-flex;flex-direction:column;align-items:center;justify-content:center;background:rgba(255,255,255,0.07);backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px);border:none;color:#fff;font-size:32px;cursor:pointer;-webkit-tap-highlight-color:transparent;user-select:none;box-shadow:0 0 8px rgba(0,0,0,0.35);position:relative;z-index:3}
.key.empty{background:transparent!important;box-shadow:none!important;cursor:default;pointer-events:none;visibility:hidden}
.key .num{display:block;font-weight:600;line-height:1;font-size:34px;color:white!important;text-shadow:0 2px 10px rgba(0,0,0,0.45)}
.key .letters{display:block;font-size:12px;color:#fff;margin-top:6px;letter-spacing:0.9px;text-shadow:0 1px 2px rgba(0,0,0,0.45);font-weight:600}

/* bottom actions */
.bottom-actions{position:absolute;left:50%;bottom:calc(var(--safe-bottom) + 36px);transform:translateX(-50%);width:min(420px,calc(100% - 56px));max-width:420px;display:flex;justify-content:space-between;align-items:center;padding:0 28px;box-sizing:border-box;z-index:5;pointer-events:auto;background:transparent}
.action{background:none;border:none;color:white;font-size:18px;line-height:1;font-weight:400;opacity:0.98;cursor:pointer;-webkit-tap-highlight-color:transparent;padding:6px 8px;display:inline-block;text-align:center}

/* unlock overlay */
.unlock-overlay{position:fixed;inset:0;z-index:9999;display:none;align-items:center;justify-content:center;background:transparent;pointer-events:none}
.homescreen-img{position:fixed;top:0;left:0;width:100vw;height:100vh;object-fit:cover;transform-origin:center;transform:scale(0.98);opacity:0;filter:blur(6px) saturate(0.9);z-index:10000;pointer-events:none;backface-visibility:hidden}
.unlock-overlay.show{display:flex;pointer-events:auto}

/* toast */
#pass-toast{position:fixed;left:50%;bottom:calc(var(--safe-bottom) + 110px);transform:translateX(-50%);background:rgba(0,0,0,0.75);color:#fff;padding:8px 12px;border-radius:10px;font-weight:600;z-index:12002;pointer-events:none;font-family:-apple-system,BlinkMacSystemFont,"SF Pro Text","Helvetica Neue",Arial,sans-serif;box-shadow:0 6px 18px rgba(0,0,0,0.6);opacity:0;transition:opacity 160ms ease,transform 160ms ease}

/* wrong attempt shake */
@keyframes passShake{0%{transform:translateX(0)}6%{transform:translateX(-20px)}14%{transform:translateX(16px)}24%{transform:translateX(-14px)}36%{transform:translateX(12px)}52%{transform:translateX(-8px)}72%{transform:translateX(6px)}88%{transform:translateX(-3px)}100%{transform:translateX(0)}}
.dots.wrong{animation:passShake 700ms cubic-bezier(.36,.07,.19,.97);transform-origin:center;will-change:transform}

/* reduced motion fallback */
@media (prefers-reduced-motion:reduce){.lockscreen-inner{transition:none!important;transform:none!important}.homescreen-img{transition:none!important;transform:none!important;filter:none!important;opacity:1!important}}

/* emergency tweak */
#emergency{margin-left:-6px}
@media(max-width:420px){#emergency{margin-left:-8px}}

/* ========== Dynamic Island ========== */
.dynamic-island{
  position:absolute;
  left:50%;
  top:calc(env(safe-area-inset-top,20px) + var(--island-top-offset));
  transform:translateX(calc(-50% - 10px)) scaleX(1);
  transform-origin:center;
  width:var(--island-w);
  height:var(--island-h);
  border-radius:var(--island-radius);
  pointer-events:none;
  z-index:12001;
  background:
    linear-gradient(180deg, rgba(255,255,255,0.04) 0%, rgba(255,255,255,0.02) 6%, rgba(0,0,0,0.92) 24%),
    radial-gradient(80% 120% at 50% -40%, rgba(255,255,255,0.06), rgba(0,0,0,0) 45%),
    #000;
  box-shadow:0 16px 36px rgba(0,0,0,0.55), 0 0 0 1px rgba(255,255,255,0.03) inset, 0 1px 0 rgba(255,255,255,0.06) inset;
  backdrop-filter:blur(8px) saturate(0.9);-webkit-backdrop-filter:blur(8px) saturate(0.9);
  transition:transform 520ms cubic-bezier(.22,.9,.29,.99),opacity 420ms ease;
  will-change:transform,opacity;
}

/* shrink */
.dynamic-island.shrinking{transform:translateX(calc(-50% - 10px)) scaleX(0.02);opacity:0}

/* hide built-in decorative pseudo lock if present (we use .padlock) */
.dynamic-island::before{display:none!important}

/* --- PADLOCK: pseudo-element shackle + body --- */
.dynamic-island .padlock{
  position:absolute;
  left:12px;
  top:50%;
  width:28px;            /* slightly larger for better visibility */
  height:32px;
  transform:translateY(-50%);
  z-index:99999;         /* very high so it paints above pseudo elements */
  pointer-events:none;
  display:block !important;
  -webkit-backface-visibility:hidden;
  backface-visibility:hidden;
  will-change:transform,opacity;
}

/* shackle (rotating) */
.dynamic-island .padlock::before{
  content:"";
  position:absolute;
  top:0;
  left:7px;                /* centers the shackle above the body */
  width:14px;
  height:12px;
  box-sizing:border-box;
  border:2px solid #fff;
  border-bottom:none;
  border-radius:7px 7px 0 0;
  transform-origin:right bottom; /* hinge on right-bottom of the shackle so it opens to the right */
  transform:rotate(0deg);
  transition:transform 0.42s cubic-bezier(.22,.9,.29,.99),opacity 160ms linear;
  will-change:transform,opacity;
  background:transparent;
  mix-blend-mode:normal;
}

/* body (static) */
.dynamic-island .padlock::after{
  content:"";
  position:absolute;
  bottom:0;
  left:0;
  width:28px;
  height:20px;
  background:#fff;
  border-radius:3px;
  box-shadow:0 2px 6px rgba(0,0,0,0.12) inset;
  will-change:transform,opacity;
}

/* open state: rotate shackle toward the right (anticlockwise negative value)
   - tweak angle if you want slightly less/more rotation.
*/
.dynamic-island.icon-opened .padlock::before,
.dynamic-island.unlocked .padlock::before{
  transform:rotate(-170deg);
  opacity:1;
}

/* subtle pop on the body while opening */
.dynamic-island.icon-opened .padlock::after,
.dynamic-island.unlocked .padlock::after{
  transform-origin:center;
  transform:scale(1.02);
  transition:transform 420ms cubic-bezier(.22,.9,.29,.99);
}

/* face icon on right (unchanged) */
.dynamic-island::after{
  content:"";
  position:absolute;
  top:50%;
  right:12px;
  width:var(--island-icon-size);
  height:var(--island-icon-size);
  transform:translateY(-50%);
  opacity:0.98;
  filter:drop-shadow(0 1px 0 rgba(0,0,0,0.45));
  background-repeat:no-repeat;
  background-position:center;
  background-size:var(--island-icon-size) var(--island-icon-size);
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-opacity='0.18' stroke-width='1.4' stroke-linecap='round' stroke-linejoin='round'><circle cx='9' cy='11' r='1.2' fill='%23ffffff' fill-opacity='0.18' stroke='none'/><circle cx='15' cy='11' r='1.2' fill='%23ffffff' fill-opacity='0.18' stroke='none'/><path d='M9 15c1.2 1 4.8 1 6 0' stroke='%23ffffff' stroke-opacity='0.18' fill='none'/></svg>");
}

/* inner gloss */
.dynamic-island .gloss{position:absolute;left:9%;right:9%;top:8%;height:36%;border-radius:999px;pointer-events:none;background:linear-gradient(180deg,rgba(255,255,255,0.06),rgba(255,255,255,0.02));filter:blur(5px);opacity:0.95;mix-blend-mode:screen}

/* responsive small tweaks */
@media(max-width:420px){
  :root{--island-w:300px;--island-h:40px;--island-radius:26px;--island-icon-size:20px}
  .dynamic-island{width:var(--island-w)}
  .dynamic-island::after{width:var(--island-icon-size);height:var(--island-icon-size);right:14px;background-size:var(--island-icon-size) var(--island-icon-size)}
  .dynamic-island .padlock{left:12px;width:24px;height:28px}
  .dynamic-island .padlock::before{left:5px;width:12px;height:10px;border-width:1.6px;border-radius:6px 6px 0 0}
  .dynamic-island .padlock::after{width:24px;height:16px}
}

/* contrast */
@media(prefers-contrast:more){.dynamic-island{box-shadow:0 18px 42px rgba(0,0,0,0.7)}.dynamic-island .padlock::before{border-color:#fff}.dynamic-island .padlock::after{background:#fff}}

/* face pulse helper */
.dynamic-island.pulse::after{animation:facePulse 1400ms ease-in-out infinite}
@keyframes facePulse{0%{transform:translateY(-50%) scale(0.98);opacity:0.95}50%{transform:translateY(-50%) scale(1.06);opacity:1}100%{transform:translateY(-50%) scale(0.98);opacity:0.95}}
/* ---------- end file ---------- */
